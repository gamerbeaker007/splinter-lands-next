// components/BiomeBoosts.stories.tsx
import { Meta, StoryObj } from "@storybook/nextjs-vite";
import { LandDeedCard } from "./LandDeedCard";
import { DeedComplete } from "@/types/deed";
import { SplCardDetails } from "@/types/splCardDetails";
import Box from "@mui/material/Box";

const meta: Meta<typeof LandDeedCard> = {
  title: "Components/PlayerOverview/LandDeedCard/LandDeedCard",
  component: LandDeedCard,
};

export default meta;

type Story = StoryObj<typeof LandDeedCard>;

const completeDeedFixture1: DeedComplete = {
  map_name: "Praetoria",
  region_id: 89,
  tract_id: 1442,
  plot_id: 144182,
  region_number: 92,
  tract_number: 10,
  plot_number: 82,
  territory: "Wild Northeast",
  region_uid: "PR-WNE-92",
  resource_id: 1,
  resource_symbol: "GRAIN",
  magic_type: "",
  stats: '{"building_in_box":true}',
  deed_uid: "I-290-39ea52bf105215",
  player: "beaker007",
  created_date: new Date("2023-04-05T00:27:27.220Z"),
  listed: false,
  lock_days: 3,
  unlock_date: null,
  in_use: true,
  deed_type: "Plains",
  land_stats: '{ "resources": ["grain"] }',
  region_name: "Zilac",
  market_updated_date: null,
  market_id: null,
  listing_price: null,
  market_listing_id: null,
  market_listing_status_id: null,
  castle: null,
  keep: null,
  rarity: "rare",
  plot_status: "natural",
  hex_code: "#796703",
  tax_rate: "0.10",
  item_detail_id: 290,
  created_block_num: 73725262,
  created_tx: "292139a9007f7c677adf7ccf8ad0035b010aa645",
  worksite_type: "Grain Farm",
  time_crystal_value: 1000,
  rarity_sort_value: 2,
  is_construction: false,
  worksiteDetail: {
    id: 256874,
    project_type: "worksite_grain",
    project_number: 2,
    deed_uid: "I-290-39ea52bf105215",
    land_work_type_id: 10,
    total_time_crystals_used: 0,
    pp_balance: 0,
    start_date: new Date("2025-06-22T06:16:12.000Z"),
    projected_hours: 0,
    projected_end: null,
    completed_date: null,
    created_date: new Date("2025-06-22T06:16:12.000Z"),
    last_updated_date: new Date("2025-06-22T06:16:12.000Z"),
    trx_id: "69a12f5c23f3d1f75b792bee3059b754282c0cdb",
    block_num: 96996856,
    resource_id: 1,
    token_symbol: "GRAIN",
    pp_required: 0,
    hours_to_completion: null,
    elapsed_hours: 1347.956,
    pp_spent: 0,
    grain_required: 148.425,
    wood_required: 0,
    stone_required: 0,
    iron_required: 0,
    is_active: true,
    destroyed_date: null,
    is_construction: false,
    last_action_time: new Date("2025-08-17T08:14:48.000Z"),
    hours_till_next_op: 0,
    next_op_allowed_date: new Date("2025-08-17T09:14:48.000Z"),
    pp_staked: 9900,
    projected_amount_received: 352.633,
    work_per_hour_per_one_pp: 0.02,
    project_id: 256874,
    is_harvesting: true,
    is_empty: false,
    is_sps_work: false,
    sps_mining_reward_debt: 0,
    latest_sps_reward_block: 0,
    sps_tokens_per_block: 0,
    accumulated_sps_rewards_per_share_of_pool: 0,
    land_work_type_total_work_type_pp: 274895741.907,
    captured_tax_rate: 0,
    time_crystal_value: 1000,
    project_created_date: new Date("2025-06-22T06:16:12.000Z"),
    worksite_type: "Grain Farm",
    max_tax_rate: 0,
    region_uid: "PR-WNE-92",
    hours_since_last_op: 1.979,
    site_efficiency: 1,
    is_runi_staked: false,
    rewards_per_hour: 198,
    grain_req_per_hour: 75,
    segments: null,
    estimated_totem_chance: 0.0001,
    resource_recipe: [],
    resource_mint_rate: 0.02,
  },
  stakingDetail: {
    region_uid: "PR-WNE-92",
    deed_uid: "I-290-39ea52bf105215",
    is_powered: true,
    is_runi_staked: false,
    is_power_core_staked: true,
    max_workers_allowed: 5,
    runi_boost: 0,
    title_boost: 0,
    totem_boost: 0.1,
    deed_status_token_boost: 0,
    deed_rarity_boost: 0.1,
    total_boost: 0.2,
    total_base_pp_cap: 100000,
    total_base_pp: 7500,
    total_base_pp_after_cap: 7500,
    total_base_pp_after_cap_percentage: 1,
    total_construction_pp: 8250,
    total_terrain_boost: 0.1,
    total_terrain_boost_pp: 750,
    total_dec_stake_needed: 50000,
    total_dec_stake_in_use: 50000,
    efficiency: 1,
    total_deed_rarity_boost: 0.1,
    total_deed_rarity_boost_pp: 825,
    total_deed_status_token_boost: 0,
    total_deed_status_token_boost_pp: 0,
    total_runi_boost: 0,
    total_runi_boost_pp: 0,
    total_title_boost: 0,
    total_title_boost_pp: 0,
    total_totem_boost: 0.1,
    total_totem_boost_pp: 825,
    total_boost_pp: 1650,
    total_harvest_pp: 9900,
    total_work_per_hour: 198,
    powered_worker_count: 5,
    worker_count: 5,
    manager: "beaker007",
    active_land_project_id: 256874,
    has_completed_first_project: true,
    red_biome_modifier: 0,
    blue_biome_modifier: -0.5,
    white_biome_modifier: 0.1,
    black_biome_modifier: 0,
    green_biome_modifier: -0.5,
    gold_biome_modifier: 0.1,
    total_dec_staked: 250000,
  },
  progressInfo: {
    percentageDone: 99,
    infoStr: "1.18% Capacity",
    progressTooltip:
      "How close this plot is to full. Once capacity reached 100%, resources no longer accumulate until they are harvested",
  },
  productionInfo: {
    produce: [
      {
        resource: "GRAIN",
        amount: 178.20000000000002,
        buyPriceDEC: 1.830717441522447,
        sellPriceDEC: 1.4828811276331821,
      },
    ],
    consume: [
      {
        resource: "GRAIN",
        amount: 75,
        buyPriceDEC: 0.7705039737047336,
        sellPriceDEC: 0.6241082187008342,
      },
    ],
    netDEC: 0.8587729089323479,
  },
  stakedAssets: {
    cards: [
      {
        uid: "C7-434-ILDMT5M4DC",
        card_detail_id: 434,
        player: "beaker007",
        bcx: 11,
        gold: false,
        foil: 0,
        edition: 7,
        card_set: "chaos",
        delegated_to: "null",
        rental_type: "null",
        collection_power: 5775,
        land_base_pp: "1500.000",
        land_dec_stake_needed: 10000,
        name: "Desert Dragon - C7-434-ILDMT5M4DC",
        stake_start_date: "2025-06-30T07:44:48.000Z",
        slot: 1,
        stake_type_uid: "STK-LND-WKR",
        stake_ref_uid: "I-290-39ea52bf105215",
        base_pp_after_cap: "100000.000",
        base_pp_after_cap_percentage: "1.000",
        total_construction_pp: "1650.000",
        terrain_boost: "0.100",
        terrain_boost_pp: "150.000",
        dec_stake_needed: 10000,
        deed_rarity_boost: "0.100",
        deed_rarity_boost_pp: "165.000",
        deed_status_token_boost: "0.000",
        deed_status_token_boost_pp: "0.000",
        runi_boost: "0.000",
        runi_boost_pp: "0.000",
        title_boost: "0.000",
        title_boost_pp: "0.000",
        totem_boost: "0.100",
        totem_boost_pp: "165.000",
        boost: "0.200",
        boost_pp: "330.000",
        total_harvest_pp: "999999.000",
        work_per_hour: "39.6000000000",
        is_powered: true,
      },
      {
        uid: "C7-435-0OJL6CESAO",
        card_detail_id: 435,
        player: "beaker007",
        bcx: 11,
        gold: false,
        foil: 0,
        edition: 7,
        card_set: "chaos",
        delegated_to: "null",
        rental_type: "null",
        collection_power: 5775,
        land_base_pp: "1500.000",
        land_dec_stake_needed: 10000,
        name: "Zyvax Vuul - C7-435-0OJL6CESAO",
        stake_start_date: "2025-06-30T07:44:48.000Z",
        slot: 2,
        stake_type_uid: "STK-LND-WKR",
        stake_ref_uid: "I-290-39ea52bf105215",
        base_pp_after_cap: "1500.000",
        base_pp_after_cap_percentage: "1.000",
        total_construction_pp: "1650.000",
        terrain_boost: "-0.100",
        terrain_boost_pp: "150.000",
        dec_stake_needed: 10000,
        deed_rarity_boost: "0.100",
        deed_rarity_boost_pp: "165.000",
        deed_status_token_boost: "0.000",
        deed_status_token_boost_pp: "0.000",
        runi_boost: "0.000",
        runi_boost_pp: "0.000",
        title_boost: "0.000",
        title_boost_pp: "0.000",
        totem_boost: "0.100",
        totem_boost_pp: "165.000",
        boost: "0.200",
        boost_pp: "330.000",
        total_harvest_pp: "1980.000",
        work_per_hour: "39.6000000000",
        is_powered: true,
      },
      {
        uid: "C7-450-3XRG60OMMO",
        card_detail_id: 450,
        player: "beaker007",
        bcx: 11,
        gold: false,
        foil: 0,
        edition: 7,
        card_set: "chaos",
        delegated_to: "null",
        rental_type: "null",
        collection_power: 5775,
        land_base_pp: "1500.000",
        land_dec_stake_needed: 10000,
        name: "Carnage Titan - C7-450-3XRG60OMMO",
        stake_start_date: "2025-06-30T07:44:48.000Z",
        slot: 3,
        stake_type_uid: "STK-LND-WKR",
        stake_ref_uid: "I-290-39ea52bf105215",
        base_pp_after_cap: "1500.000",
        base_pp_after_cap_percentage: "1.000",
        total_construction_pp: "1650.000",
        terrain_boost: "0.0",
        terrain_boost_pp: "150.000",
        dec_stake_needed: 10000,
        deed_rarity_boost: "0.100",
        deed_rarity_boost_pp: "165.000",
        deed_status_token_boost: "0.000",
        deed_status_token_boost_pp: "0.000",
        runi_boost: "0.000",
        runi_boost_pp: "0.000",
        title_boost: "0.000",
        title_boost_pp: "0.000",
        totem_boost: "0.100",
        totem_boost_pp: "165.000",
        boost: "0.200",
        boost_pp: "330.000",
        total_harvest_pp: "1980.000",
        work_per_hour: "39.6000000000",
        is_powered: true,
      },
      {
        uid: "C7-450-67P51DOW9S",
        card_detail_id: 450,
        player: "beaker007",
        bcx: 11,
        gold: false,
        foil: 0,
        edition: 7,
        card_set: "chaos",
        delegated_to: "null",
        rental_type: "null",
        collection_power: 5775,
        land_base_pp: "1500.000",
        land_dec_stake_needed: 10000,
        name: "Carnage Titan - C7-450-67P51DOW9S",
        stake_start_date: "2025-06-30T07:44:48.000Z",
        slot: 4,
        stake_type_uid: "STK-LND-WKR",
        stake_ref_uid: "I-290-39ea52bf105215",
        base_pp_after_cap: "1500.000",
        base_pp_after_cap_percentage: "1.000",
        total_construction_pp: "1650.000",
        terrain_boost: "0.100",
        terrain_boost_pp: "150.000",
        dec_stake_needed: 10000,
        deed_rarity_boost: "0.100",
        deed_rarity_boost_pp: "165.000",
        deed_status_token_boost: "0.000",
        deed_status_token_boost_pp: "0.000",
        runi_boost: "0.000",
        runi_boost_pp: "0.000",
        title_boost: "0.000",
        title_boost_pp: "0.000",
        totem_boost: "0.100",
        totem_boost_pp: "165.000",
        boost: "0.200",
        boost_pp: "330.000",
        total_harvest_pp: "1980.000",
        work_per_hour: "39.6000000000",
        is_powered: true,
      },
      {
        uid: "C7-450-9ZZ2XTHKWW",
        card_detail_id: 450,
        player: "beaker007",
        bcx: 11,
        gold: false,
        foil: 0,
        edition: 7,
        card_set: "chaos",
        delegated_to: "null",
        rental_type: "null",
        collection_power: 5775,
        land_base_pp: "1500.000",
        land_dec_stake_needed: 10000,
        name: "Carnage Titan - C7-450-9ZZ2XTHKWW",
        stake_start_date: "2025-06-30T07:44:48.000Z",
        slot: 5,
        stake_type_uid: "STK-LND-WKR",
        stake_ref_uid: "I-290-39ea52bf105215",
        base_pp_after_cap: "1500.000",
        base_pp_after_cap_percentage: "1.000",
        total_construction_pp: "1650.000",
        terrain_boost: "0.100",
        terrain_boost_pp: "150.000",
        dec_stake_needed: 10000,
        deed_rarity_boost: "0.100",
        deed_rarity_boost_pp: "165.000",
        deed_status_token_boost: "0.000",
        deed_status_token_boost_pp: "0.000",
        runi_boost: "0.000",
        runi_boost_pp: "0.000",
        title_boost: "0.000",
        title_boost_pp: "0.000",
        totem_boost: "0.100",
        totem_boost_pp: "165.000",
        boost: "0.200",
        boost_pp: "330.000",
        total_harvest_pp: "1980.000",
        work_per_hour: "39.6000000000",
        is_powered: true,
      },
    ],
    items: [
      {
        uid: "I-318-MU5HHLVKGW",
        item_detail_id: 318,
        player: "beaker007",
        stake_start_date: "2025-06-30T07:45:06.000Z",
        stake_type_uid: "STK-LND-TOT",
        stake_ref_uid: "I-290-39ea52bf105215",
        stake_ref_id: "null",
        name: "Common Totem",
        boost: 0.1,
      },
      {
        uid: "I-322-12KTKA7H4G",
        item_detail_id: 322,
        player: "beaker007",
        stake_start_date: "2025-06-13T14:26:27.000Z",
        stake_type_uid: "STK-LND-PCR",
        stake_ref_uid: "I-290-39ea52bf105215",
        stake_ref_id: "null",
        name: "Power Core",
        boost: 0.0,
      },
    ],
  },
};
const cardDetails: SplCardDetails[] = [
  {
    id: 434,
    name: "Desert Dragon",
    color: "Gold",
    type: "Monster",
    sub_type: "Dragon",
    rarity: 4,
    is_starter: false,
    editions: "7",
    is_promo: false,
    tier: 7,
  },
  {
    id: 435,
    name: "Zyvax Vuul",
    color: "Gold",
    type: "Monster",
    sub_type: "Drakoshan",
    rarity: 4,
    is_starter: false,
    editions: "7",
    is_promo: false,
    tier: 7,
  },
  {
    id: 450,
    name: "Carnage Titan",
    color: "Gold",
    type: "Monster",
    sub_type: "Golem",
    rarity: 4,
    is_starter: false,
    editions: "7",
    is_promo: false,
  },
];

export const Default: Story = {
  render: () => {
    return (
      <Box
        sx={{
          minWidth: 800,
          zoom: { xs: "35%", sm: "65%", md: "80%", lg: "90%" },
        }}
      >
        <LandDeedCard data={completeDeedFixture1} cardDetails={cardDetails} />
      </Box>
    );
  },
};
